<!DOCTYPE html>
{% load static %}
{% load socialaccount %}

<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>
    <title>SCAP-Peru</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico"/>
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css"/>
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="{% static "css/styles.css" %}" rel="stylesheet"/>
    <style>
        header.masthead {
            padding-top: 10.5rem;
            padding-bottom: 6rem;
            text-align: center;
            color: #fff;
            background-image: url("{% static "assets/img/pilotcountry/peru-pexels-chelsea-cook-2929906_b.jpg" %}");
            background-repeat: no-repeat;
            background-attachment: scroll;
            background-position: center center;
            background-size: cover;
        }
    </style>


    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/leaflet-timedimension@1.1.1/dist/leaflet.timedimension.control.min.css"/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.2/dist/leaflet.css"
          integrity="sha256-sA+zWATbFveLLNqWO2gtiw3HL/lh1giY/Inf1BJ0z14=" crossorigin=""/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css"/>
    <link rel="stylesheet" href="{% static '/css/geosearch.css' %}"/>
    <link rel="stylesheet" href="{% static '/css/range.css' %}"/>
    <link rel="stylesheet" href="{% static '/css/map.css' %}"/>
    <link href="{% static '/css/L.Control.Opacity.css' %}" rel="stylesheet"/>

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/streamgraph.js"></script>
    <script src="https://code.highcharts.com/modules/series-label.js"></script>
    <script src="https://code.highcharts.com/modules/annotations.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/no-data-to-display.js"></script>


    <script src="https://unpkg.com/leaflet@1.9.2/dist/leaflet.js"
            integrity="sha256-o9N1jGDZrf5tS+Ft4gbIK7mYMipq9lqpVJ91xHSyKhg=" crossorigin=""></script>
    <script src="https://unpkg.com/esri-leaflet@3.0.8/dist/esri-leaflet.js"
            integrity="sha512-E0DKVahIg0p1UHR2Kf9NX7x7TUewJb30mxkxEm2qOYTVJObgsAGpEol9F6iK6oefCbkJiA4/i6fnTHzM6H1kEA=="
            crossorigin=""></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/iso8601-js-period@0.2.1/iso8601.min.js"></script>
    <script type="text/javascript"
            src="https://cdn.jsdelivr.net/npm/leaflet-timedimension@1.1.1/dist/leaflet.timedimension.min.js"></script>
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-search/3.0.5/leaflet-search.src.js"
            integrity="sha512-PDM7dpetuBcPp2fV/ZyCj9BGV8ybPchsrSzQqVZ3WoM8YcxEa2lAj0n1+4MCRzgsEROmVTwQXGw0IrXCCgH+/Q=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src='https://unpkg.com/@turf/turf@6/turf.min.js'></script>

    <script src="{% static '/js/L.Control.Opacity.js' %}"></script>
    <script src="{% static '/js/leaflet-side-by-side.js' %}"></script>
    <script src="{% static '/js/leaflet-providers.js' %}"></script>
    <script src="{% static '/js/utils.js' %}"></script>
    <script src="{% static '/js/basemaps.js' %}"></script>
    <script src="{% static '/js/geosearch.umd.js' %}"></script>
    <script src="{% static '/js/map.js' %}"></script>
</head>
<body id="page-top">
<!-- Navigation-->
<nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav" style="background: #212529;height:80px">
    <div class="container-fluid">
        <a class="navbar-brand" style="padding-left: 20px" href="#page-top"><img src="{% static "assets/img/SERVIR_flat_white2.png" %}" alt="..."/></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive"
                aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            Menu
            <i class="fas fa-bars ms-1"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav text-uppercase ms-auto py-4 py-lg-0">
                <li class="nav-item"><a class="nav-link" href="{% url "home" %}#callstoaction">Actions</a></li>
                <li class="nav-item"><a class="nav-link" href="{% url "home" %}#pilotcountry">Pilot Countries</a></li>
                <li class="nav-item"><a class="nav-link" href="{% url "home" %}#services">Datasets</a></li>
                <li class="nav-item"><a class="nav-link" href="{% url "home" %}#about">About</a></li>
                <li class="nav-item"><a class="nav-link" href="{% url "home" %}#team">Team</a></li>
                <li class="nav-item"><a class="nav-link" href="{% url "home" %}#contact">Contact</a></li>
                {% if user.is_authenticated %}

                    <li class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button"
                           aria-haspopup="true" aria-expanded="false">{{ user.username }} <span
                                class="caret"></span></a>
                        <ul class="dropdown-menu bg-transparent">
                            <li><a class="nav-link" href="{% url 'logout' %}">Logout</a>
                            </li>

                        </ul>

                    </li>
                {% else %}
                    <li class="nav-item"><a class="nav-link" href="{% provider_login_url 'google' %}?next=/">

                        Login
                    </a></li>

                {% endif %}                    </ul>
        </div>
    </div>
</nav>
<nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="subNav"
     style="margin-top: 80px;height: 40px;opacity: 0.7;font-weight: bold">
    <div class="collapse navbar-collapse" id="subnavbarResponsive">
        <ul class="navbar-nav text-uppercase py-4 py-lg-0" style="margin-left: auto; 
margin-right: 0;">
            <li class="nav-item"><a class="nav-link text-warning"
                                    href="#InitialMap">Map</a></li>
            <li class="nav-item"><a class="nav-link text-warning"
                                    href="#EmissionsChart">Emissions</a>
            </li>
            <li class="nav-item"><a class="nav-link text-warning"
                                    href="#NetForestChangeChart">Net
                Forest Change</a></li>
        </ul>
    </div>
</nav>
<!-- Masthead-->
<header class="masthead">
    <div class="container">
        <div class="masthead-heading text-uppercase">Peru</div>
        <div class="section-subheading">Home to a section of Amazon rainforest and Machu Picchu, an ancient Incan city
            high in the Andes mountains
        </div>
        <!-- <a class="btn btn-primary btn-xl text-uppercase" href="#services">Tables and Maps</a> -->
    </div>
</header>

<!-- Calls to Action -->
<section class="page-section" id="InitialMap">
    <div class="container">
        <div id="peru-map" style="width: 100%">
            <button class="btn btn-primary" type="button" id="loading_spinner_map" style="left: 50%;
    margin-left: -4em;

    width: 9em;
    height: 3em;
    position: absolute;
    top: 45%;
    z-index: 999;">
                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                Loading...
            </button>
            <div id="map_chart"></div>
            <div id="selector_table">
                <div class="d-flex">
                    <div class="form-group">
                        <label>Primary Year</label>
                        <select name="selected_year" id="selected_year"
                                class="form-control"
                                onchange="redraw_map_layers()">
                            <option value="0" selected="selected">Loading...</option>
                        </select>
                    </div>
                </div>
                <div class="d-flex">
                    <div class="form-group">
                        <label>Dataset</label>
                        <select name="selected_region" id="selected_region" class="form-control"
                                onchange="redraw_map_layers()">
                            <option value="esri" selected="selected">ESRI</option>
                            <option value="modis">MODIS</option>
                            <option value="jaxa">JAXA</option>
                            <option value="worldcover">WorldCover</option>
                            <option value="mapbiomas">Mapbiomas</option>
                            <option value="cci">CCI</option>
                        </select>
                    </div>
                </div>
            </div>

            <div id="comparison_table">
                <div class="d-flex" id="comparison-selector">
                    <div class="d-flex">
                        <div class="form-group">
                            <label>Comparison Year</label>
                            <select name="comparison_year" id="comparison_year"
                                    class="form-control"
                                    onchange="redraw_map_layers()">
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div>
            <div class="card" style="width: 100%;">
                {#                <img class="card-img-top" src="{% static "assets/img/image.png" %}" alt="Peru protected Areas">#}
                <div class="card-body">
                    <h5 class="card-title">Visualize forest cover changes around protected areas</h5>
                    <p class="card-text">Peru is home to a diverse range of ecosystems, including a significant portion
                        of the Amazon rainforest. The country's
                        forest cover plays a crucial role in maintaining biodiversity, regulating climate, and providing
                        essential ecosystem services.<br>
                        Monitoring forest cover changes in Peru is of utmost importance to understand the impact of
                        deforestation and take necessary
                        measures for conservation. By visualizing forest cover changes, we can assess the extent of
                        deforestation, identify areas at risk,
                        and monitor progress towards deforestation targets.<br>
                        Through advanced technologies and satellite imagery, we can track changes in forest cover over
                        time and analyze the drivers of
                        deforestation. This information helps policymakers, researchers, and conservationists make
                        informed decisions and implement effective
                        strategies to protect Peru's forests.</p>
                    <a href="#" class="btn btn-primary">Navigate the map</a>
                </div>
            </div>
            <div class="card-body">
            </div>
        </div>
    </div>
</section>
<script>
    var lc_colors = {{colors|safe}};
    console.log(lc_colors);
</script>
<section class="page-section" id="EmissionsChart">
    <div class="container">
        <div class="card" style="width: 100%">
            {#                <img class="card-img-top" src="{% static "assets/img/EmissionsChart1.png" %}" alt="EmissionsChart">#}


            <h5 class="card-title" style="margin-left: 10px;margin-top:10px">Explore how different sources estimate
                emissions</h5>
            <p class="card-text" style="margin-left: 10px">
                The chart below shows how the data from different sources compare to each other. These
                combinations represent the range of
                estimations for the entire country. The chart can be used to explore the differences between the
                data sources and to understand
                the uncertainty in the estimations.
            </p>
            <a href="#" class="btn btn-primary w-25" style="margin-left: 10px">Combine with your own data</a>

            <div class="card-body">
                <div class="row h-100 ">

                    <div class="col-3 m-auto" id="checkbox_selection">
                        <div class="LC_checkboxlist">
                            <b style="font-family:Helvetica, Arial, sans-serif; ">Land Cover Datasets:</b><br>
                            <ul class="lc_list" style="list-style-type: none">
                                {% for lc in lcs %}
                                    <span style="display: none" id='LC{{ lc.id }}'>{{ lc.name_es }}</span>

                                    <li class="lc_list-item">
                                        <input type="checkbox" checked class="lc_list-item-checkbox LC_cb"
                                               onchange="access_lines(this,'LC')"
                                               value="{{ lc.id }}" name="lc"/><label id="LC{{ lc.id }}"
                                                                                     style="padding-left: 10px;font-family: Helvetica, Arial, sans-serif;">
                                        {% if lc.name_es != "Mapbiomas" %}<i class="fa-solid fa-globe"></i>{% endif %}
                                        &nbsp;{{ lc.name_es }}<span
                                            class="badge bg-light text-dark">(LC{{ lc.id }})</span> </label>
                                    </li>
                                {% endfor %}
                            </ul>
                        </div>
                        <hr width="50%">
                        <div class="AGB_checkboxlist">
                            <b style="font-family: Helvetica, Arial, sans-serif;">Above Ground Biomass Datasets:</b><br>
                            <ul class="agb_list" style="list-style-type: none">
                                {% csrf_token %}
                                {% for agb in agbs %}
                                    <li class="agb_list-item">
                                        <input type="checkbox" checked class="agb_list-item-checkbox AGB_cb"
                                               onchange="access_lines(this,'AGB')"
                                               value="{{ agb.agb_id }}" name="agb"/><label id="AGB{{ agb.agb_id }}"
                                                                                           style="padding-left: 10px;font-family: Helvetica, Arial, sans-serif"> {{ agb.agb_name }}
                                        <span class="badge bg-light text-dark">(AGB{{ agb.agb_id }})</span></label>
                                    </li>
                                {% endfor %}
                            </ul>
                        </div>
                        <button class="btn btn-dark btn-sm" style="font-family: Helvetica, Arial, sans-serif;"
                                onclick="reset_emissions()">Select All
                        </button>
                        <button class="btn btn-dark btn-sm" style="font-family: Helvetica, Arial, sans-serif;"
                                onclick="clear_emissions()">Clear
                        </button>
                    </div>
                    <div class="col-9" id="container" style="height: 500px">
                        <script type="text/javascript">
                            new Highcharts.Chart({{chart|safe}});
                        </script>
                    </div>
                </div>
            </div>
        </div>
    </div>

</section>
<section id="NetForestChangeChart">
    <div class="container">
        <div class="card" style="width: 100%">
            <h5 class="card-title" style="margin-left: 10px;margin-top:10px">Explore the Change in Forest Cover</h5>
            <p class="card-text" style="margin-left: 10px">
                The chart below shows how the forest cover change data from different sources compare to each other.
                These chart
                lines represent the forest gain and forest loss for the entire country.
            </p>
            <a href="{% url "protected_aois" %}" target="_blank" class="btn btn-primary w-25" style="margin-left: 10px">Explore
                the protected areas inside the country</a>

            <div class="card-body">
                <div class="row h-100 ">
                    <div class="col-3 m-auto">
                        <b>Land Cover Datasets:</b><br>
                        <ul class="lcf_list_cf" style="list-style-type: none">
                            {% csrf_token %}
                            {% for lc in lc_data %}
                                <li class="lc_list-item">
                                    <input type="checkbox" checked class="lc_list-item-checkbox LC_cb_cf"
                                           value="{{ lc.id }}" onchange="access_lines_fc(this,'LC')" name="lc"/><label
                                        style="padding-left: 10px"><span
                                        class="badge bg-light text-dark">LC{{ lc.id }}</span>
                                    {% if lc.name_es != "Mapbiomas" %}<i class="fa-solid fa-globe"></i>{% endif %}
                                    &nbsp;{{ lc.name_es }}</label>
                                </li>
                                <p style="display: none" id='LC{{ lc.id }}'>{{ lc.name_es }}</p>

                            {% endfor %}
                        </ul>
                    </div>
                    <div class="col-9" id="container1" style="height: 90%">
                        <script type="text/javascript">
                            new Highcharts.Chart({{chart_fc|safe}});
                        </script>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Clients-->
<div class="py-5">
    <div class="logo-container">
        <div>
            <a href="#!"><img class="logo-img" src="{% static "assets/img/logos/USAID_padded.png" %}" alt="USAID"
                              aria-label="USAID Logo"/></a>
        </div>
        <div>
            <a href="#!"><img class="logo-img" src="{% static "assets/img/logos/NASA_padded.png" %}" alt="NASA"
                              aria-label="NASA Logo"/></a>
        </div>
        <div>
            <a href="#!"><img class="logo-img" src="{% static "assets/img/logos/SERVIR_padded.png" %}" alt="..."
                              aria-label="SERVIR Logo"/></a>
        </div>
        <!--
                    <div class="col-md-3 col-sm-6 my-3">
                        <a href="#!"><img class="img-fluid img-brand d-block mx-auto" src="{% static "assets/img/logos/ibm.svg" %}" alt="..." aria-label="IBM Logo" /></a>
                    </div>
                    -->
    </div>
</div>
<!-- Contact-->
<section class="page-section" id="contact">
    <div class="container">
        <div class="text-center">
            <h2 class="section-heading text-uppercase">Contact Us</h2>
            <h3 class="section-subheading text-muted">Let us know what you think.</h3>
        </div>
        <!-- * * * * * * * * * * * * * * *-->
        <!-- * * SB Forms Contact Form * *-->
        <!-- * * * * * * * * * * * * * * *-->
        <!-- This form is pre-integrated with SB Forms.-->
        <!-- To make this form functional, sign up at-->
        <!-- https://startbootstrap.com/solution/contact-forms-->
        <!-- to get an API token!-->
        <form id="contactForm" data-sb-form-api-token="API_TOKEN">
            <div class="row align-items-stretch mb-5">
                <div class="col-md-6">
                    <div class="form-group">
                        <!-- Name input-->
                        <input class="form-control" id="name" type="text" placeholder="Your Name *"
                               data-sb-validations="required"/>
                        <div class="invalid-feedback" data-sb-feedback="name:required">A name is required.</div>
                    </div>
                    <div class="form-group">
                        <!-- Email address input-->
                        <input class="form-control" id="email" type="email" placeholder="Your Email *"
                               data-sb-validations="required,email"/>
                        <div class="invalid-feedback" data-sb-feedback="email:required">An email is required.</div>
                        <div class="invalid-feedback" data-sb-feedback="email:email">Email is not valid.</div>
                    </div>
                    <div class="form-group">
                        <!-- Organizational affiliation input-->
                        <input class="form-control" id="organization" type="text" placeholder="Your Organization *"
                               data-sb-validations="required"/>
                        <div class="invalid-feedback" data-sb-feedback="organization:required">Your organization is
                            required.
                        </div>
                    </div>
                    <div class="form-group">
                        <!-- Phone number input-->
                        <input class="form-control" id="role" type="text" placeholder="Your Role *"
                               data-sb-validations="required"/>
                        <div class="invalid-feedback" data-sb-feedback="role:required">Your role is required.</div>
                    </div>

                </div>
                <div class="col-md-6">
                    <div class="form-group form-group-textarea mb-md-0">
                        <!-- Message input-->
                        <textarea class="form-control" id="message" placeholder="Your Message *"
                                  data-sb-validations="required"></textarea>
                        <div class="invalid-feedback" data-sb-feedback="message:required">A message is required.</div>
                    </div>
                </div>
            </div>
            <!-- Submit success message-->
            <!---->
            <!-- This is what your users will see when the form-->
            <!-- has successfully submitted-->
            <div class="d-none" id="submitSuccessMessage">
                <div class="text-center text-white mb-3">
                    <div class="fw-bolder">Form submission successful!</div>
                    To activate this form, sign up at
                    <br/>
                    <a href="https://startbootstrap.com/solution/contact-forms">https://startbootstrap.com/solution/contact-forms</a>
                </div>
            </div>
            <!-- Submit error message-->
            <!---->
            <!-- This is what your users will see when there is-->
            <!-- an error submitting the form-->
            <div class="d-none" id="submitErrorMessage">
                <div class="text-center text-danger mb-3">Error sending message!</div>
            </div>
            <!-- Submit Button-->
            <div class="text-center">
                <button class="btn btn-primary btn-xl text-uppercase disabled" id="submitButton" type="submit">Send
                    Message
                </button>
            </div>
        </form>
    </div>
</section>
<!-- Footer-->
<footer class="footer py-4">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-4 text-lg-start">Copyright &copy; SERVIR 2023</div>
            <div class="col-lg-4 my-3 my-lg-0">
                <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Twitter"><i
                        class="fab fa-twitter"></i></a>
                <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Facebook"><i
                        class="fab fa-facebook-f"></i></a>
                <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="LinkedIn"><i
                        class="fab fa-linkedin-in"></i></a>
            </div>
            <div class="col-lg-4 text-lg-end">
                <a class="link-dark text-decoration-none me-3" href="#!">Privacy Policy</a>
                <a class="link-dark text-decoration-none" href="#!">Terms of Use</a>
            </div>
        </div>
    </div>
</footer>

<script src="{% static '/js/forestchange.js' %}"></script>
<script src="{% static '/js/emissions.js' %}"></script>

<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS-->
{#<script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>#}
</body>
</html>