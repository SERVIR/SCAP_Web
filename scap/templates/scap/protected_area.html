<!DOCTYPE html>
{% load static %}
{% load socialaccount %}

<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>
    <title>SCAP</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico"/>
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css"/>
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="{% static "css/styles.css" %}" rel="stylesheet"/>
    <style>
        header.masthead {
            padding-top: 10.5rem;
            padding-bottom: 6rem;
            text-align: center;
            color: #fff;
            background-image: url("{{image}}");
            background-repeat: no-repeat;
            background-attachment: scroll;
            background-position: center center;
            background-size: cover;
        }
    </style>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="{% static '/js/utils.js' %}"></script>

    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/leaflet-timedimension@1.1.1/dist/leaflet.timedimension.control.min.css"/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.2/dist/leaflet.css"
          integrity="sha256-sA+zWATbFveLLNqWO2gtiw3HL/lh1giY/Inf1BJ0z14=" crossorigin=""/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css"/>
    <link rel="stylesheet" href="{% static '/css/geosearch.css' %}"/>
    <link rel="stylesheet" href="{% static '/css/range.css' %}"/>
    <link rel="stylesheet" href="{% static '/css/map.css' %}"/>
    <link href="{% static '/css/L.Control.Opacity.css' %}" rel="stylesheet"/>

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/streamgraph.js"></script>
    <script src="https://code.highcharts.com/modules/series-label.js"></script>
    <script src="https://code.highcharts.com/modules/annotations.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/no-data-to-display.js"></script>


    <script src="https://unpkg.com/leaflet@1.9.2/dist/leaflet.js"
            integrity="sha256-o9N1jGDZrf5tS+Ft4gbIK7mYMipq9lqpVJ91xHSyKhg=" crossorigin=""></script>
    <script src="https://unpkg.com/esri-leaflet@3.0.8/dist/esri-leaflet.js"
            integrity="sha512-E0DKVahIg0p1UHR2Kf9NX7x7TUewJb30mxkxEm2qOYTVJObgsAGpEol9F6iK6oefCbkJiA4/i6fnTHzM6H1kEA=="
            crossorigin=""></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/iso8601-js-period@0.2.1/iso8601.min.js"></script>
    <script type="text/javascript"
            src="https://cdn.jsdelivr.net/npm/leaflet-timedimension@1.1.1/dist/leaflet.timedimension.min.js"></script>
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-search/3.0.5/leaflet-search.src.js"
            integrity="sha512-PDM7dpetuBcPp2fV/ZyCj9BGV8ybPchsrSzQqVZ3WoM8YcxEa2lAj0n1+4MCRzgsEROmVTwQXGw0IrXCCgH+/Q=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src='https://unpkg.com/@turf/turf@6/turf.min.js'></script>


    <script src="{% static '/js/L.Control.Opacity.js' %}"></script>
    <script src="{% static '/js/leaflet-providers.js' %}"></script>
    <script src="{% static '/js/geosearch.umd.js' %}"></script>

</head>
<body id="page-top">
<script>
   var shp_obj = {{ shp_obj|safe }};
</script>
<!-- Navigation-->
<nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav" style="background: #212529;height:80px">
    <div class="container-fluid">
        <a class="navbar-brand" style="padding-left: 20px" href="{% url "home" %}"><img
                src="{% static "assets/img/SERVIR_flat_white2.png" %}" alt="..."/></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive"
                aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            Menu
            <i class="fas fa-bars ms-1"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav text-uppercase ms-auto py-4 py-lg-0">
                <li class="nav-item"><a class="nav-link" href="{% url "home" %}#callstoaction">Actions</a></li>
                <li class="nav-item"><a class="nav-link" href="{% url "home" %}#pilotcountry">Pilot Countries</a></li>
                <li class="nav-item"><a class="nav-link" href="{% url "home" %}#services">Datasets</a></li>
                <li class="nav-item"><a class="nav-link" href="{% url "home" %}#about">About</a></li>
                <li class="nav-item"><a class="nav-link" href="{% url "home" %}#team">Team</a></li>
                <li class="nav-item"><a class="nav-link" href="{% url "home" %}#contact">Contact</a></li>
                {% if user.is_authenticated %}

                    <li class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button"
                           aria-haspopup="true" aria-expanded="false">{{ user.username }} <span
                                class="caret"></span></a>
                        <ul class="dropdown-menu bg-transparent">
                            <li><a class="nav-link" href="{% url 'logout' %}">Logout</a>
                            </li>

                        </ul>

                    </li>
                {% else %}
                    <li class="nav-item"><a class="nav-link" href="{% provider_login_url 'google' %}?next=/">

                        Login
                    </a></li>

                {% endif %}                    </ul>
        </div>
    </div>
</nav>
<nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="subNav"
     style="margin-top: 80px;height: 40px;opacity: 0.7;font-weight: bold">
    <div class="collapse navbar-collapse" id="subnavbarResponsive">
        <ul class="navbar-nav text-uppercase py-4 py-lg-0" style="margin-left: auto;margin-right: 0">
            <li class="nav-item"><a class="nav-link text-warning"
                                    href="#InitialMap_PA">Map</a></li>
            <li class="nav-item"><a class="nav-link text-warning" href="#Emissions_PA">Emissions</a>
            </li>
            <li class="nav-item"><a class="nav-link text-warning" href="#NetForestChange_PA">Net
                Forest Change</a></li>
        </ul>
    </div>
</nav>
<!-- Masthead-->
<header class="masthead">
    <div class="container">
        <div class="masthead-heading text-uppercase" id="region_country">{{ region_country }}</div>
        <div class="section-subheading">{{tagline}}
        </div>
        <!-- <a class="btn btn-primary btn-xl text-uppercase" href="#services">Tables and Maps</a> -->
    </div>
</header>
<section id="InitialMap_PA">
    <div class="container">
        <div id="pa-map" style="width: 100%">
            <button class="btn btn-primary" type="button" id="loading_spinner_map" style="left: 50%;
    margin-left: -3em;

    width: 9em;
    height: 3em;
    position: absolute;
    top: 50%;
    z-index: 999;">
                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                Loading...
            </button>

            <div id="map_chart"></div>
            <div id="selector_table">
                <div class="d-flex">
                    <div class="form-group">
                        <label>Primary Year</label>
                        <select name="selected_year" id="selected_year"
                        class="form-control"
                        onchange="redraw_based_on_year()">
                    <option value="0" selected="selected">Loading...</option>
                </select>
                    </div>
                </div>
                <div class="d-flex">
                    <div class="form-group">
                        <label>Dataset</label>
                        <select name="selected_region" id="selected_region" class="form-control"
                                onchange="redraw_map_layers()">
                            <option value="esri">ESRI</option>
                            <option value="modis">MODIS</option>
                            <option value="jaxa" selected="selected">JAXA</option>
                            <option value="worldcover">WorldCover</option>
                            <option value="mapbiomas">Mapbiomas</option>
                            <option value="cci">CCI</option>
                        </select>
                    </div>
                </div>
            </div>

            <div id="comparison_table">
                <div class="d-flex" id="comparison-selector">
                    <div class="d-flex">
                        <div class="form-group">
                            <label>Comparison Year</label>
                            <select name="comparison_year" id="comparison_year"
                            class="form-control"
                            onchange="redraw_based_on_year()">
                    </select>
                        </div>
                    </div>
                </div>
                                <div class="d-flex">
                    <div class="form-group">
                        <label>Dataset</label>
                        <select name="comparing_region" id="comparing_region" class="form-control"
                                onchange="redraw_map_layers()">
                            <option value="esri" selected="selected">ESRI</option>
                            <option value="modis">MODIS</option>
                            <option value="jaxa">JAXA</option>
                            <option value="worldcover">WorldCover</option>
                            <option value="mapbiomas">Mapbiomas</option>
                            <option value="cci">CCI</option>
                        </select>
                    </div>
                </div>
            </div>


        </div>
        <br>
        <div>
        <a class="btn btn-outline-primary" href="{% url 'pilot_country' country=country_id %}">Go to {{country_name}} country page</a>
</div>
    </div>

</section>
<script>
    var lc_colors = {{colors|safe}};
    console.log(lc_colors);
</script>
<section id="Emissions_PA">
    <div class="container">
        <div class="card" style="width: 100%">
            <h5 class="card-title" style="margin-left: 10px;margin-top:10px">Explore how different sources estimate
                emissions</h5>
            <p class="card-text" style="margin-left: 10px">
                The chart below shows how the data from different sources compare to each other. These
                combinations represent the range of
                estimations for the entire country. The chart can be used to explore the differences between the
                data sources and to understand
                the uncertainty in the estimations.
            </p>

            <div class="card-body">
                <div class="row h-100 ">

                    <div class="col-3 m-auto" id="checkbox_selection">
                        <div class="LC_checkboxlist">
                            <b style="font-family:Helvetica, Arial, sans-serif; ">Land Cover Datasets:</b><br>
                            <ul class="lc_list" style="list-style-type: none">
                                {% for lc in lcs %}
                                    <li class="lc_list-item">
                                        <input type="checkbox" checked class="lc_list-item-checkbox LC_cb_pa"
                                               onchange="access_lines(this,'LC')"
                                               value="{{ lc.id }}" name="lc"/><label id="LC{{ lc.id }}"
                                                                                     style="padding-left: 10px;font-family: Helvetica, Arial, sans-serif;">
                                        {% if lc.name != "Mapbiomas" %}<i class="fa-solid fa-globe"></i>{% endif %}
                                        &nbsp;{{ lc.name }}<span
                                            class="badge bg-light text-dark">(LC{{ lc.id }})</span> </label>
                                    </li>
                                {% endfor %}
                            </ul>
                        </div>
                        <hr width="50%">
                        <div class="AGB_checkboxlist">
                            <b style="font-family: Helvetica, Arial, sans-serif;">Above Ground Biomass Datasets:</b><br>
                            <ul class="agb_list" style="list-style-type: none">
                                {% csrf_token %}
                                {% for agb in agbs %}
                                    <li class="agb_list-item">
                                        <input type="checkbox" checked class="agb_list-item-checkbox AGB_cb_pa"
                                               onchange="access_lines(this,'AGB')"
                                               value="{{ agb.id }}" name="agb"/><label id="AGB{{ agb.id }}"
                                                                                           style="padding-left: 10px;font-family: Helvetica, Arial, sans-serif"> {{ agb.name }}
                                        <span class="badge bg-light text-dark">(AGB{{ agb.id }})</span></label>
                                    </li>
                                {% endfor %}
                            </ul>
                        </div>
                        <button class="btn btn-dark btn-sm" style="font-family: Helvetica, Arial, sans-serif;"
                                onclick="reset_emissions()">Select All
                        </button>
                        <button class="btn btn-dark btn-sm" style="font-family: Helvetica, Arial, sans-serif;"
                                onclick="clear_emissions()">Clear
                        </button>
                    </div>
                    <div class="col-9" id="emissions_chart_pa" style="height: 500px">
                        <script type="text/javascript">
                            new Highcharts.Chart({{chart_epa|safe}});
                        </script>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<section id="NetForestChange_PA">
    <div class="container">
        <div class="card" style="width: 100%">
            <h5 class="card-title" style="margin-left: 10px;margin-top:10px">Explore the Change in Forest Cover</h5>
            <p class="card-text" style="margin-left: 10px">
                The chart below shows how the forest cover change data from different sources compare to each other.
                These chart
                lines represent the forest gain and forest loss for the entire country.
            </p>

            <div class="card-body">
                <div class="row h-100 ">
                    <div class="col-3 m-auto">
                        <b>Land Cover Datasets:</b><br>
                        <ul class="lcf_list_cf_pa" style="list-style-type: none">
                            {% csrf_token %}
                            {% for lc in lc_data %}
                                <li class="lc_list-item">
                                    <input type="checkbox" checked class="lc_list-item-checkbox LC_cb_cf_pa"
                                               onchange="access_lines(this,'LC')"
                                               value="{{ lc.id }}" name="lc"/><label id="{{ lc.name }}"
                                                                                     style="padding-left: 10px;font-family: Helvetica, Arial, sans-serif;">
                                        {% if lc.name != "Mapbiomas" %}<i class="fa-solid fa-globe"></i>{% endif %}
                                        &nbsp;{{ lc.name }}<span
                                            class="badge bg-light text-dark">(LC{{ lc.id }})</span> </label>
                                </li>

                            {% endfor %}
                        </ul>
                    </div>
                    <div class="col-9" id="container_fcpa" style="height: 90%">
                        <script type="text/javascript">
                            new Highcharts.Chart({{chart_fcpa|safe}});
                        </script>
                    </div>

                </div>
            </div>
        </div>
    </div>
</section>
<div class="pilotcountry-modal modal fade" id="info_modal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content"  style="width: 85%;margin:auto;padding-bottom: 10px;padding-top: 10px">


            <div class="container-fluid">
                 <div class="row">
                    <div class="col">
                        <div class="modal-body" >
                            <!-- Project details-->
                            <h4 class="text-uppercase">Understanding the map</h4>
                           <div class="container-fluid">
                               <div class="row">
<div class="col-md-6">
    <div class="thumbnail">
     <img  src="{% static "assets/img/red_image.PNG" %}" width="100%" alt="image for red area"/>
        <div class="caption">
                                   <p style="text-align: left">Comparing <b>different years for same forest cover collection</b></p>
                                   <p style="text-align: left">The left side (A) shows the earlier year in bright green, indicating the places that were
                                   originally identified as forest.</p>
                                       <p style="text-align: left">The right side (B) shows the later year in darker green, with the areas that have lost forest cover in red.
                                       </p>
        </div>

    </div>
</div>
                                   <div class="col-md-6">
    <div class="thumbnail">
     <img  src="{% static "assets/img/yellow_image.PNG" %}" width="100%" alt="image for yellow area"/>
        <div class="caption">
                                         <p style="text-align: left">Comparing <b>data from different forest cover collections</b></p>
                                       <p style="text-align: left">The left side (A) shows the first dataset in green, while the yellow pixels indicate
                                       locations identified as forest only in the second dataset.</p>
                                       <p style="text-align: left">
                                           The right side (B) shows the second dataset in green, with yellow pixels indicating locations
                                           identified as forest only in the first dataset
                                       </p>
        </div>

    </div>
</div>

                                   </div>

                            <button class="btn btn-primary text-uppercase float-end mb-2" data-bs-dismiss="modal" type="button">
                                Close
                            </button>
            </div>
        </div>
    </div>
</div>
<script src="{% static '/js/forestchange_pa.js' %}"></script>
<script src="{% static '/js/emissions_pa.js' %}"></script>
<script src="{% static '/js/utils.js' %}"></script>
<script src="{% static '/js/leaflet-side-by-side.js' %}"></script>

<script src="{% static '/js/basemaps.js' %}"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.css">
<script src="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.js"></script>
                    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw-src.css" integrity="sha512-vJfMKRRm4c4UupyPwGUZI8U651mSzbmmPgR3sdE3LcwBPsdGeARvUM5EcSTg34DK8YIRiIo+oJwNfZPMKEQyug==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js" integrity="sha512-ozq8xQKq6urvuU6jNgkfqAmT7jKN2XumbrX1JiB3TnF7tI48DPI4Gy1GXKD/V3EExgAs1V+pRO7vwtS1LHg0Gw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="{% static '/js/map.js' %}"></script>

<script src="{% static '/js/pa_map.js' %}"></script>

<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
